# Makefile.in for dcdis
#
# Copyright (C) 1999-2004 Lars Olsson (Maiwe)
# Copyright (C) 2019 Moopthehedgehog
# Copyright (C) 2020 SiZiOUS
# 
# This file is part of dcdis

# dcdis is distributed in the hope that it will be useful,
# but WITHOUT ANY WARRANTY; without even the implied warranty of
# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.

TARGET = dcdis

VERSION = 1.0.0

OBJS = dcdis.o symtab.o decode.o utils.o vector.o

CC = @CC@
CFLAGS = @CFLAGS@ -Wall -DDCDIS_VERSION=\"$(VERSION)\"
DEFS = @DEFS@
LIBS = @LIBS@
INSTALL = @INSTALL@
INSTALLDIR = @prefix@

RM = rm -f
STRIP = strip

EXECUTABLEEXTENSION =
ifeq ($(shell echo $(OS)),Windows_NT)
  EXECUTABLEEXTENSION := .exe
endif

OUTPUT = $(TARGET)$(EXECUTABLEEXTENSION)

all:: dcdis

dcdis:	$(OBJS)
	$(CC) $(CFLAGS) $(DEFS) -o $(OUTPUT) $(OBJS) $(LIBS)
	$(STRIP) $(OUTPUT)

%.o: %.c
	$(CC) $(CFLAGS) $(DEFS) -c $< -o $@

install::
	mkdir -p $(INSTALLDIR)/bin 
	$(INSTALL) -m 755 $(OUTPUT) $(INSTALLDIR)/bin

uninstall::
	$(RM) $(INSTALLDIR)/bin/$(OUTPUT)

clean::
	$(RM) $(OBJS) $(OUTPUT)

distclean::
	$(RM) config.* Makefile $(OBJS) $(OUTPUT)
