# Makefile.in for dcdis
#
# Copyright (C) 1999 Lars Olsson
#
# This file is part of dcdis.

# dcdis is distributed in the hope that it will be useful,
# but WITHOUT ANY WARRANTY; without even the implied warranty of
# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.

CC = @CC@
CFLAGS = @CFLAGS@ -Wall
DEFS = @DEFS@
LIBS = @LIBS@
INSTALL = @INSTALL@
INSTALLDIR = @prefix@

RM = rm -f
STRIP = strip

TARGET = dcdis

EXECUTABLEEXTENSION =
ifeq ($(shell echo $(OS)),Windows_NT)
  EXECUTABLEEXTENSION := .exe
endif

OUTPUT = $(TARGET)$(EXECUTABLEEXTENSION)

OBJS = dcdis.o symtab.o decode.o

all:: dcdis

dcdis:	$(OBJS)
	$(CC) $(CFLAGS) $(DEFS) -o $(OUTPUT) $(OBJS) $(LIBS)
	$(STRIP) $(OUTPUT)

dcdis.o:	dcdis.c
	$(CC) $(CFLAGS) $(DEFS) -c dcdis.c

symtab.o:	symtab.c
	$(CC) $(CFLAGS) $(DEFS) -c symtab.c

decode.o:	decode.c
	$(CC) $(CFLAGS) $(DEFS) -c decode.c

install::
	mkdir -p $(INSTALLDIR)/bin 
	$(INSTALL) -m 755 $(OUTPUT) $(INSTALLDIR)/bin

uninstall::
	$(RM) $(INSTALLDIR)/bin/$(OUTPUT)

clean::
	$(RM) $(OBJS) $(OUTPUT)

distclean::
	$(RM) config.* Makefile $(OBJS) $(OUTPUT)
